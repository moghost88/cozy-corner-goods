var te=Object.defineProperty,oe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var A=(r,a,s)=>a in r?te(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,f=(r,a)=>{for(var s in a||(a={}))D.call(a,s)&&A(r,s,a[s]);if(w)for(var s of w(a))q.call(a,s)&&A(r,s,a[s]);return r},v=(r,a)=>oe(r,ie(a));var R=(r,a)=>{var s={};for(var o in r)D.call(r,o)&&a.indexOf(o)<0&&(s[o]=r[o]);if(r!=null&&w)for(var o of w(r))a.indexOf(o)<0&&q.call(r,o)&&(s[o]=r[o]);return s};var M=(r,a,s)=>new Promise((o,t)=>{var n=c=>{try{m(s.next(c))}catch(x){t(x)}},d=c=>{try{m(s.throw(c))}catch(x){t(x)}},m=c=>c.done?o(c.value):Promise.resolve(c.value).then(n,d);m((s=s.apply(r,a)).next())});import{e as $,g as F,j as e,i as k,f as P,n as de,l as ne,k as ce,o as L,h as le,u as ue,p as pe,I as me}from"./ui-components-Cwvw8Ahd.js";import{r as p,d as xe}from"./react-vendor-CGklD7G4.js";import{c as B,e as he,b as fe,d as je,s as ve}from"./index-BA8FsFh7.js";import{N as O,F as T,S as E}from"./Footer-BbRcLB5x.js";import{B as S,I as C}from"./logo-BrdLi5QD.js";import{L as b}from"./label-DMVRMaUU.js";import{m as ye,n as ge,o as be,p as Ne}from"./icons-Om4nLF3E.js";import"./utils-RvYD77G1.js";import"./supabase-CLqt2Rfr.js";var G="Radio",[Re,z]=$(G),[Ce,we]=Re(G),K=p.forwardRef((r,a)=>{const j=r,{__scopeRadio:s,name:o,checked:t=!1,required:n,disabled:d,value:m="on",onCheck:c,form:x}=j,h=R(j,["__scopeRadio","name","checked","required","disabled","value","onCheck","form"]),[y,l]=p.useState(null),N=F(a,g=>l(g)),u=p.useRef(!1),i=y?x||!!y.closest("form"):!0;return e.jsxs(Ce,{scope:s,checked:t,disabled:d,children:[e.jsx(k.button,v(f({type:"button",role:"radio","aria-checked":t,"data-state":H(t),"data-disabled":d?"":void 0,disabled:d,value:m},h),{ref:N,onClick:P(r.onClick,g=>{t||c==null||c(),i&&(u.current=g.isPropagationStopped(),u.current||g.stopPropagation())})})),i&&e.jsx(Y,{control:y,bubbles:!u.current,name:o,value:m,checked:t,required:n,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});K.displayName=G;var U="RadioIndicator",V=p.forwardRef((r,a)=>{const d=r,{__scopeRadio:s,forceMount:o}=d,t=R(d,["__scopeRadio","forceMount"]),n=we(U,s);return e.jsx(de,{present:o||n.checked,children:e.jsx(k.span,v(f({"data-state":H(n.checked),"data-disabled":n.disabled?"":void 0},t),{ref:a}))})});V.displayName=U;var Se="RadioBubbleInput",Y=p.forwardRef((d,n)=>{var m=d,{__scopeRadio:r,control:a,checked:s,bubbles:o=!0}=m,t=R(m,["__scopeRadio","control","checked","bubbles"]);const c=p.useRef(null),x=F(c,n),h=ne(s),y=ce(a);return p.useEffect(()=>{const l=c.current;if(!l)return;const N=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(N,"checked").set;if(h!==s&&i){const j=new Event("click",{bubbles:o});i.call(l,s),l.dispatchEvent(j)}},[h,s,o]),e.jsx(k.input,v(f({type:"radio","aria-hidden":!0,defaultChecked:s},t),{tabIndex:-1,ref:x,style:v(f(f({},t.style),y),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});Y.displayName=Se;function H(r){return r?"checked":"unchecked"}var ke=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I="RadioGroup",[Ie,ze]=$(I,[L,z]),Q=L(),W=z(),[Ee,Pe]=Ie(I),X=p.forwardRef((r,a)=>{const g=r,{__scopeRadioGroup:s,name:o,defaultValue:t,value:n,required:d=!1,disabled:m=!1,orientation:c,dir:x,loop:h=!0,onValueChange:y}=g,l=R(g,["__scopeRadioGroup","name","defaultValue","value","required","disabled","orientation","dir","loop","onValueChange"]),N=Q(s),u=le(x),[i,j]=ue({prop:n,defaultProp:t!=null?t:null,onChange:y,caller:I});return e.jsx(Ee,{scope:s,name:o,required:d,disabled:m,value:i,onValueChange:j,children:e.jsx(pe,v(f({asChild:!0},N),{orientation:c,dir:u,loop:h,children:e.jsx(k.div,v(f({role:"radiogroup","aria-required":d,"aria-orientation":c,"data-disabled":m?"":void 0,dir:u},l),{ref:a}))}))})});X.displayName=I;var Z="RadioGroupItem",J=p.forwardRef((r,a)=>{const N=r,{__scopeRadioGroup:s,disabled:o}=N,t=R(N,["__scopeRadioGroup","disabled"]),n=Pe(Z,s),d=n.disabled||o,m=Q(s),c=W(s),x=p.useRef(null),h=F(a,x),y=n.value===t.value,l=p.useRef(!1);return p.useEffect(()=>{const u=j=>{ke.includes(j.key)&&(l.current=!0)},i=()=>l.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",i),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",i)}},[]),e.jsx(me,v(f({asChild:!0},m),{focusable:!d,active:y,children:e.jsx(K,v(f(f({disabled:d,required:n.required,checked:y},c),t),{name:n.name,ref:h,onCheck:()=>n.onValueChange(t.value),onKeyDown:P(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:P(t.onFocus,()=>{var u;l.current&&((u=x.current)==null||u.click())})}))}))});J.displayName=Z;var _e="RadioGroupIndicator",ee=p.forwardRef((r,a)=>{const n=r,{__scopeRadioGroup:s}=n,o=R(n,["__scopeRadioGroup"]),t=W(s);return e.jsx(V,v(f(f({},t),o),{ref:a}))});ee.displayName=_e;var se=X,re=J,Fe=ee;const ae=p.forwardRef((o,s)=>{var t=o,{className:r}=t,a=R(t,["className"]);return e.jsx(se,v(f({className:B("grid gap-2",r)},a),{ref:s}))});ae.displayName=se.displayName;const _=p.forwardRef((o,s)=>{var t=o,{className:r}=t,a=R(t,["className"]);return e.jsx(re,v(f({ref:s,className:B("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r)},a),{children:e.jsx(Fe,{className:"flex items-center justify-center",children:e.jsx(ye,{className:"h-2.5 w-2.5 fill-current text-current"})})}))});_.displayName=re.displayName;const Ke=()=>{const{items:r,cartTotal:a,clearCart:s}=he(),{user:o}=fe(),t=xe(),{toast:n}=je(),[d,m]=p.useState("shipping"),[c,x]=p.useState(!1),[h,y]=p.useState({fullName:"",email:"",street:"",city:"",zipCode:"",country:""}),l=i=>{y(v(f({},h),{[i.target.id]:i.target.value}))},N=i=>{i.preventDefault(),m("payment"),window.scrollTo(0,0)},u=i=>M(void 0,null,function*(){if(i.preventDefault(),x(!0),yield new Promise(j=>setTimeout(j,2e3)),o){const{error:j}=yield ve.from("purchases").insert(r.map(g=>({user_id:o.id,product_id:g.id,product_name:g.name,price:g.price,purchased_at:new Date().toISOString()})));j&&console.error("Error recording purchase:",j)}s(),x(!1),n({title:"Order placed successfully!",description:"Check your email for confirmation."}),t("/")});return r.length===0?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(O,{}),e.jsxs("div",{className:"container mx-auto flex min-h-[60vh] flex-col items-center justify-center gap-4 px-4 text-center",children:[e.jsx("h1",{className:"font-display text-2xl font-bold",children:"Your cart is empty"}),e.jsx(S,{onClick:()=>t("/"),variant:"gradient",children:"Continue Shopping"})]}),e.jsx(T,{})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(O,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"mb-8 font-display text-3xl font-bold",children:"Checkout"}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${d==="shipping"?"text-primary":"text-muted-foreground"}`,children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full border-2 ${d==="shipping"?"border-primary bg-primary text-primary-foreground":"border-muted-foreground"}`,children:d==="payment"?e.jsx(ge,{className:"h-5 w-5"}):"1"}),e.jsx("span",{className:"font-medium",children:"Shipping"})]}),e.jsx(E,{className:"w-10"}),e.jsxs("div",{className:`flex items-center gap-2 ${d==="payment"?"text-primary":"text-muted-foreground"}`,children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full border-2 ${d==="payment"?"border-primary bg-primary text-primary-foreground":"border-muted-foreground"}`,children:"2"}),e.jsx("span",{className:"font-medium",children:"Payment"})]})]}),d==="shipping"?e.jsxs("form",{onSubmit:N,className:"space-y-6 rounded-2xl border border-border bg-card p-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"fullName",children:"Full Name"}),e.jsx(C,{id:"fullName",required:!0,value:h.fullName,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"email",children:"Email"}),e.jsx(C,{id:"email",type:"email",required:!0,value:h.email,onChange:l})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"street",children:"Street Address"}),e.jsx(C,{id:"street",required:!0,value:h.street,onChange:l})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"city",children:"City"}),e.jsx(C,{id:"city",required:!0,value:h.city,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"zipCode",children:"Zip Code"}),e.jsx(C,{id:"zipCode",required:!0,value:h.zipCode,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"country",children:"Country"}),e.jsx(C,{id:"country",required:!0,value:h.country,onChange:l})]})]}),e.jsx(S,{type:"submit",variant:"hero",size:"lg",className:"w-full",children:"Continue to Payment"})]}):e.jsxs("form",{onSubmit:u,className:"space-y-6 rounded-2xl border border-border bg-card p-6",children:[e.jsxs(ae,{defaultValue:"card",className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 rounded-xl border border-border p-4 [&:has(:checked)]:border-primary [&:has(:checked)]:bg-primary/5",children:[e.jsx(_,{value:"card",id:"card"}),e.jsxs(b,{htmlFor:"card",className:"flex flex-1 items-center gap-2 font-medium cursor-pointer",children:[e.jsx(be,{className:"h-5 w-5"}),"Credit / Debit Card"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rounded-xl border border-border p-4 [&:has(:checked)]:border-primary [&:has(:checked)]:bg-primary/5",children:[e.jsx(_,{value:"cod",id:"cod"}),e.jsxs(b,{htmlFor:"cod",className:"flex flex-1 items-center gap-2 font-medium cursor-pointer",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Cash on Delivery"]})]})]}),e.jsxs("div",{className:"space-y-4 rounded-lg bg-muted/50 p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"Card Number"}),e.jsx(C,{placeholder:"0000 0000 0000 0000"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"Expiry Date"}),e.jsx(C,{placeholder:"MM/YY"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"CVC"}),e.jsx(C,{placeholder:"123"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(S,{type:"button",variant:"outline",className:"flex-1",onClick:()=>m("shipping"),children:"Back"}),e.jsx(S,{type:"submit",variant:"hero",className:"flex-[2]",disabled:c,children:c?"Processing...":`Pay $${a.toFixed(2)}`})]})]})]}),e.jsxs("div",{className:"h-fit rounded-2xl border border-border bg-card p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 font-display text-xl font-bold",children:"Order Summary"}),e.jsx("div",{className:"mb-4 space-y-4",children:r.map(i=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-md border border-border",children:e.jsx("img",{src:i.image,alt:i.name,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex flex-1 flex-col justify-center",children:[e.jsx("h4",{className:"text-sm font-medium line-clamp-1",children:i.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",i.quantity]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium",children:["$",(i.price*i.quantity).toFixed(2)]})})]},i.id))}),e.jsx(E,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{children:["$",a.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{className:"text-green-600",children:"Free"})]}),e.jsx(E,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-display font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",a.toFixed(2)]})]})]})]})]})]}),e.jsx(T,{})]})};export{Ke as default};
