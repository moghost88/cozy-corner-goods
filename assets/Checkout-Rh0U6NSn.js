import{c as N,d as A,r as d,g as P,j as e,P as C,f as S,k as X,h as Z,e as J,i as G,o as ee,l as re,s as se,m as ae,t as te}from"./index-BzzuNZSM.js";import{u as oe,N as _,F,a as k}from"./Footer-DONgzQM4.js";import{B as b,I as g}from"./logo-QEkxIfKD.js";import{L as v}from"./label-DkLQ_kIz.js";import{c as D,R as ie,I as de}from"./index-CXvQIRfR.js";import{u as ce}from"./index-Ci2vjPZd.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=N("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=N("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=N("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=N("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var E="Radio",[pe,q]=A(E),[xe,he]=pe(E),M=d.forwardRef((a,i)=>{const{__scopeRadio:r,name:u,checked:s=!1,required:c,disabled:o,value:h="on",onCheck:p,form:f,...n}=a,[y,m]=d.useState(null),l=P(i,j=>m(j)),x=d.useRef(!1),t=y?f||!!y.closest("form"):!0;return e.jsxs(xe,{scope:r,checked:s,disabled:o,children:[e.jsx(C.button,{type:"button",role:"radio","aria-checked":s,"data-state":$(s),"data-disabled":o?"":void 0,disabled:o,value:h,...n,ref:l,onClick:S(a.onClick,j=>{s||p==null||p(),t&&(x.current=j.isPropagationStopped(),x.current||j.stopPropagation())})}),t&&e.jsx(O,{control:y,bubbles:!x.current,name:u,value:h,checked:s,required:c,disabled:o,form:f,style:{transform:"translateX(-100%)"}})]})});M.displayName=E;var T="RadioIndicator",L=d.forwardRef((a,i)=>{const{__scopeRadio:r,forceMount:u,...s}=a,c=he(T,r);return e.jsx(X,{present:u||c.checked,children:e.jsx(C.span,{"data-state":$(c.checked),"data-disabled":c.disabled?"":void 0,...s,ref:i})})});L.displayName=T;var fe="RadioBubbleInput",O=d.forwardRef(({__scopeRadio:a,control:i,checked:r,bubbles:u=!0,...s},c)=>{const o=d.useRef(null),h=P(o,c),p=ce(r),f=Z(i);return d.useEffect(()=>{const n=o.current;if(!n)return;const y=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(y,"checked").set;if(p!==r&&l){const x=new Event("click",{bubbles:u});l.call(n,r),n.dispatchEvent(x)}},[p,r,u]),e.jsx(C.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:h,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});O.displayName=fe;function $(a){return a?"checked":"unchecked"}var ye=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R="RadioGroup",[je,Pe]=A(R,[D,q]),z=D(),B=q(),[ve,ge]=je(R),V=d.forwardRef((a,i)=>{const{__scopeRadioGroup:r,name:u,defaultValue:s,value:c,required:o=!1,disabled:h=!1,orientation:p,dir:f,loop:n=!0,onValueChange:y,...m}=a,l=z(r),x=oe(f),[t,j]=J({prop:c,defaultProp:s??null,onChange:y,caller:R});return e.jsx(ve,{scope:r,name:u,required:o,disabled:h,value:t,onValueChange:j,children:e.jsx(ie,{asChild:!0,...l,orientation:p,dir:x,loop:n,children:e.jsx(C.div,{role:"radiogroup","aria-required":o,"aria-orientation":p,"data-disabled":h?"":void 0,dir:x,...m,ref:i})})})});V.displayName=R;var H="RadioGroupItem",K=d.forwardRef((a,i)=>{const{__scopeRadioGroup:r,disabled:u,...s}=a,c=ge(H,r),o=c.disabled||u,h=z(r),p=B(r),f=d.useRef(null),n=P(i,f),y=c.value===s.value,m=d.useRef(!1);return d.useEffect(()=>{const l=t=>{ye.includes(t.key)&&(m.current=!0)},x=()=>m.current=!1;return document.addEventListener("keydown",l),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",x)}},[]),e.jsx(de,{asChild:!0,...h,focusable:!o,active:y,children:e.jsx(M,{disabled:o,required:c.required,checked:y,...p,...s,name:c.name,ref:n,onCheck:()=>c.onValueChange(s.value),onKeyDown:S(l=>{l.key==="Enter"&&l.preventDefault()}),onFocus:S(s.onFocus,()=>{var l;m.current&&((l=f.current)==null||l.click())})})})});K.displayName=H;var be="RadioGroupIndicator",U=d.forwardRef((a,i)=>{const{__scopeRadioGroup:r,...u}=a,s=B(r);return e.jsx(L,{...s,...u,ref:i})});U.displayName=be;var Y=V,Q=K,Ne=U;const W=d.forwardRef(({className:a,...i},r)=>e.jsx(Y,{className:G("grid gap-2",a),...i,ref:r}));W.displayName=Y.displayName;const I=d.forwardRef(({className:a,...i},r)=>e.jsx(Q,{ref:r,className:G("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:e.jsx(Ne,{className:"flex items-center justify-center",children:e.jsx(le,{className:"h-2.5 w-2.5 fill-current text-current"})})}));I.displayName=Q.displayName;const Ee=()=>{const{items:a,cartTotal:i,clearCart:r}=ee(),{user:u}=re(),s=se(),{toast:c}=ae(),[o,h]=d.useState("shipping"),[p,f]=d.useState(!1),[n,y]=d.useState({fullName:"",email:"",street:"",city:"",zipCode:"",country:""}),m=t=>{y({...n,[t.target.id]:t.target.value})},l=t=>{t.preventDefault(),h("payment"),window.scrollTo(0,0)},x=async t=>{if(t.preventDefault(),f(!0),await new Promise(j=>setTimeout(j,2e3)),u){const{error:j}=await te.from("purchases").insert(a.map(w=>({user_id:u.id,product_id:w.id,product_name:w.name,price:w.price,purchased_at:new Date().toISOString()})));j&&console.error("Error recording purchase:",j)}r(),f(!1),c({title:"Order placed successfully!",description:"Check your email for confirmation."}),s("/")};return a.length===0?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(_,{}),e.jsxs("div",{className:"container mx-auto flex min-h-[60vh] flex-col items-center justify-center gap-4 px-4 text-center",children:[e.jsx("h1",{className:"font-display text-2xl font-bold",children:"Your cart is empty"}),e.jsx(b,{onClick:()=>s("/"),variant:"gradient",children:"Continue Shopping"})]}),e.jsx(F,{})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(_,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"mb-8 font-display text-3xl font-bold",children:"Checkout"}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${o==="shipping"?"text-primary":"text-muted-foreground"}`,children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full border-2 ${o==="shipping"?"border-primary bg-primary text-primary-foreground":"border-muted-foreground"}`,children:o==="payment"?e.jsx(ne,{className:"h-5 w-5"}):"1"}),e.jsx("span",{className:"font-medium",children:"Shipping"})]}),e.jsx(k,{className:"w-10"}),e.jsxs("div",{className:`flex items-center gap-2 ${o==="payment"?"text-primary":"text-muted-foreground"}`,children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full border-2 ${o==="payment"?"border-primary bg-primary text-primary-foreground":"border-muted-foreground"}`,children:"2"}),e.jsx("span",{className:"font-medium",children:"Payment"})]})]}),o==="shipping"?e.jsxs("form",{onSubmit:l,className:"space-y-6 rounded-2xl border border-border bg-card p-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"fullName",children:"Full Name"}),e.jsx(g,{id:"fullName",required:!0,value:n.fullName,onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"email",children:"Email"}),e.jsx(g,{id:"email",type:"email",required:!0,value:n.email,onChange:m})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"street",children:"Street Address"}),e.jsx(g,{id:"street",required:!0,value:n.street,onChange:m})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"city",children:"City"}),e.jsx(g,{id:"city",required:!0,value:n.city,onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"zipCode",children:"Zip Code"}),e.jsx(g,{id:"zipCode",required:!0,value:n.zipCode,onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"country",children:"Country"}),e.jsx(g,{id:"country",required:!0,value:n.country,onChange:m})]})]}),e.jsx(b,{type:"submit",variant:"hero",size:"lg",className:"w-full",children:"Continue to Payment"})]}):e.jsxs("form",{onSubmit:x,className:"space-y-6 rounded-2xl border border-border bg-card p-6",children:[e.jsxs(W,{defaultValue:"card",className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 rounded-xl border border-border p-4 [&:has(:checked)]:border-primary [&:has(:checked)]:bg-primary/5",children:[e.jsx(I,{value:"card",id:"card"}),e.jsxs(v,{htmlFor:"card",className:"flex flex-1 items-center gap-2 font-medium cursor-pointer",children:[e.jsx(ue,{className:"h-5 w-5"}),"Credit / Debit Card"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rounded-xl border border-border p-4 [&:has(:checked)]:border-primary [&:has(:checked)]:bg-primary/5",children:[e.jsx(I,{value:"cod",id:"cod"}),e.jsxs(v,{htmlFor:"cod",className:"flex flex-1 items-center gap-2 font-medium cursor-pointer",children:[e.jsx(me,{className:"h-5 w-5"}),"Cash on Delivery"]})]})]}),e.jsxs("div",{className:"space-y-4 rounded-lg bg-muted/50 p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Card Number"}),e.jsx(g,{placeholder:"0000 0000 0000 0000"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Expiry Date"}),e.jsx(g,{placeholder:"MM/YY"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"CVC"}),e.jsx(g,{placeholder:"123"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(b,{type:"button",variant:"outline",className:"flex-1",onClick:()=>h("shipping"),children:"Back"}),e.jsx(b,{type:"submit",variant:"hero",className:"flex-[2]",disabled:p,children:p?"Processing...":`Pay $${i.toFixed(2)}`})]})]})]}),e.jsxs("div",{className:"h-fit rounded-2xl border border-border bg-card p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 font-display text-xl font-bold",children:"Order Summary"}),e.jsx("div",{className:"mb-4 space-y-4",children:a.map(t=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-md border border-border",children:e.jsx("img",{src:t.image,alt:t.name,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex flex-1 flex-col justify-center",children:[e.jsx("h4",{className:"text-sm font-medium line-clamp-1",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",t.quantity]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium",children:["$",(t.price*t.quantity).toFixed(2)]})})]},t.id))}),e.jsx(k,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{children:["$",i.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{className:"text-green-600",children:"Free"})]}),e.jsx(k,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-display font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",i.toFixed(2)]})]})]})]})]})]}),e.jsx(F,{})]})};export{Ee as default};
